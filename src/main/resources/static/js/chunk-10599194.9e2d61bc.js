(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10599194"],{"2f75":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return o}));var i=a("b775");function r(t,e){return Object(i["a"])({url:"/device/list/admin",method:"post",data:{companyName:t.companyName,deviceNum:t.deviceNum,pageNum:e.pageNumber,pageSize:e.pageSize}})}function n(t){return Object(i["a"])({url:"/device/add",method:"post",data:{companyName:t.companyName,deviceNum:t.deviceNum}})}function c(t){return Object(i["a"])({url:"/device/delete",method:"post",data:{deviceNum:t}})}function s(t){return Object(i["a"])({url:"/device/edit/admin",method:"post",data:{companyName:t.companyName,deviceNum:t.deviceNum}})}function o(t){return Object(i["a"])({url:"/device/edit/user",method:"post",data:{img:t.img,deviceNum:t.deviceNum,deviceName:t.deviceName,collectSpace:t.collectSpace,attributeInfo:t.attributeInfo,taskNum:t.taskNum}})}},4870:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}));var i=a("b775");function r(t){return Object(i["a"])({url:"/base/list/companyName",method:"post",data:{}})}function n(t){return Object(i["a"])({url:"/base/list/task/device",method:"post",data:{taskState:t}})}},9406:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("div",[a("el-form",{ref:"listTime",attrs:{model:t.listTime,"label-width":"130px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"起点:",prop:"alarmObject"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.listTime.startTime,callback:function(e){t.$set(t.listTime,"startTime",e)},expression:"listTime.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"设备编号:"}},[a("el-cascader",{attrs:{options:t.options,placeholder:"请选择",clearable:""},model:{value:t.listTime.deviceNum,callback:function(e){t.$set(t.listTime,"deviceNum",e)},expression:"listTime.deviceNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.btnQuery()}}},[t._v("查询")]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.btnModify()}}},[t._v("修改设备信息")])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.temp.img}})],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.time))]),t._v(" "),a("el-row",{attrs:{gutter:30}},t._l(t.cardData,(function(e){return a("el-col",{key:e.name,attrs:{span:6}},[a("el-card",{staticClass:"box-card",staticStyle:{"border-radius":"20px","margin-top":"10px"}},[a("div",[a("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(e.name))]),t._v("      \n            "),a("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(e.realtimevalue))])])])],1)})),1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,rules:t.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"deviceNum"}},[a("el-input",{attrs:{disabled:""},model:{value:t.temp.deviceNum,callback:function(e){t.$set(t.temp,"deviceNum",e)},expression:"temp.deviceNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"deviceName"}},[a("el-input",{model:{value:t.temp.deviceName,callback:function(e){t.$set(t.temp,"deviceName",e)},expression:"temp.deviceName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"采集频率",prop:"collectSpace"}},[a("el-input",{model:{value:t.temp.collectSpace,callback:function(e){t.$set(t.temp,"collectSpace",e)},expression:"temp.collectSpace"}},[a("template",{slot:"append"},[t._v("分钟")])],2)],1),t._v(" "),t._l(t.temp.attributeInfo,(function(e){return a("el-form-item",{key:e.code,attrs:{label:e.code}},[a("el-input",{model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1)})),t._v(" "),a("el-form-item",{attrs:{label:"设备图片"}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.temp.img,"preview-src-list":t.srcList}}),t._v(" "),a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.showPictures()}}},[t._v("修改")])],1)],2),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateData()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择图片",visible:t.dialogPictureVisible},on:{"update:visible":function(e){t.dialogPictureVisible=e}}},[a("div",{staticClass:"demo-image__lazy"},t._l(t.urls,(function(e){return a("el-image",{key:e,attrs:{src:e,lazy:""},on:{click:function(a){return t.confirmPicture(e)}}})})),1)])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("div",{staticClass:"chart-container",attrs:{id:"chartDiv"}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"mnsjChart"}})])])}],n=(a("ac6a"),a("7f7f"),a("b85c")),c=a("b117"),s=a("313e"),o=a.n(s),l=a("de52"),u=a.n(l),m=a("d4ed"),d=a("2f75"),p=a("4870"),v={name:"LineChart",data:function(){return{rules:{deviceNum:[{required:!0,message:"请输入设备编号",trigger:"blur"}],deviceName:[{required:!0,message:"请输入设备名称",trigger:"blur"}],collectSpace:[{required:!0,message:"请输入采集间隔",trigger:"blur"}]},options:[],cardData:[],time:"",listTime:{startTime:u()().format("yyyy-MM-DD 00:00:00"),deviceNum:[],endTime:""},chart:null,srcList:[],dialogFormVisible:!1,dialogPictureVisible:!1,urls:[],temp:{deviceNum:void 0,deviceName:void 0,attributeInfo:void 0,img:void 0,collectSpace:void 0,taskNum:void 0},taskState:1}},mounted:function(){var t=this;this.getDeviceNum(),this.timer?clearInterval(this.timer):this.timer=setInterval((function(){t.btnQuery()}),3e5)},destroyed:function(){clearInterval(this.timer)},methods:{getDeviceNum:function(){var t=this;Object(p["b"])(this.taskState).then((function(e){t.options=e.data,t.listTime.deviceNum.push(e.data[0].value),t.listTime.deviceNum.push(e.data[0].children[0].value),t.initChart()}))},updateData:function(){var t=this;this.$refs.dataForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(d["d"])(t.temp).then((function(e){t.btnQuery(),t.dialogFormVisible=!1}))}))},showPictures:function(){var t=this;this.dialogPictureVisible=!0,this.urls=[],Object(m["a"])().then((function(e){for(var a=0;a<e.data.length;a++)t.urls.push(e.data[a].url)}))},confirmPicture:function(t){this.temp.img=t,this.srcList=[this.temp.img],this.dialogPictureVisible=!1},btnModify:function(){this.dialogFormVisible=!0},initChart:function(){var t=document.getElementById("mnsjChart");t.style.height="300px",this.chart=o.a.init(t),this.btnQuery()},btnQuery:function(){var t=this;Object(c["c"])(this.listTime).then((function(e){var a=[],i=[];t.cardData=[];var r,c=Object(n["a"])(e.data.yDatas);try{for(c.s();!(r=c.n()).done;){var s=r.value,o={name:s.name,type:"line",data:s.values};a.push(o),i.push(s.name);var l={name:s.name,realtimevalue:s.values[s.values.length-1]};t.cardData.push(l)}}catch(u){c.e(u)}finally{c.f()}t.setOptionData(e.data.xDatas,a,i),t.temp.deviceNum=t.listTime.deviceNum[1],t.temp.taskNum=t.listTime.deviceNum[0],t.temp.deviceName=e.data.deviceName,t.temp.attributeInfo=e.data.attributeInfo,t.temp.collectSpace=e.data.collectSpace,t.temp.img=e.data.deviceImg,t.time=e.data.xDatas[e.data.xDatas.length-1]}))},setOptionData:function(t,e,a){this.chart.setOption({tooltip:{trigger:"axis"},legend:{data:a},toolbox:{itemSize:30,feature:{saveAsImage:{show:!0}}},grid:{top:100,left:"2%",right:"2%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:t}],yAxis:[{type:"value",name:"(℃)",axisTick:{show:!1},axisLabel:{margin:10,textStyle:{fontSize:14}}}],series:e})}}},f=v,b=(a("9a78"),a("2877")),h=Object(b["a"])(f,i,r,!1,null,"50446edd",null);e["default"]=h.exports},"9a78":function(t,e,a){"use strict";var i=a("ed83"),r=a.n(i);r.a},b117:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return o}));a("ac6a");var i=a("b775");function r(t){return Object(i["a"])({url:"/data/query/char",method:"post",data:{startTime:t.startTime,endTime:t.endTime,taskNum:t.deviceNum[0],deviceNum:t.deviceNum[1]}})}function n(t,e){return Object(i["a"])({url:"/data/query/table",method:"post",data:{startTime:t.startTime,endTime:t.endTime,taskNum:t.deviceNum[0],deviceNum:t.deviceNum[1],pageNum:e.pageNumber,pageSize:e.pageSize}})}function c(t,e){return Object(i["a"])({url:"/data/simulation",method:"post",data:{startTime:t.startTime,stableTime:t.stableTime,downTime:t.downTime,endTime:t.endTime,taskNum:t.deviceNum[0],deviceNum:t.deviceNum[1],timeSpace:t.timeSpace,randomTime:t.randomTime,listTemp:e}})}function s(t,e){return Object(i["a"])({url:"/data/change",method:"post",data:{taskNum:e.deviceNum[0],deviceNum:e.deviceNum[1],time:t.time,values:t.values}})}function o(t,e){return Object(i["a"])({url:"/data/copy",method:"post",data:{taskNum:e.deviceNum[0],deviceNum:e.deviceNum[1],fromAttr:t.fromAttr,toAttr:t.toAttr,addData:t.addData,randomData:t.randomData,startTime:e.startTime,endTime:t.endTime}})}},d4ed:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}));var i=a("b775");function r(){return Object(i["a"])({url:"/base/list/img",method:"post",data:{}})}function n(t){return Object(i["a"])({url:"/base/remove/img",method:"post",data:{url:t}})}},ed83:function(t,e,a){}}]);