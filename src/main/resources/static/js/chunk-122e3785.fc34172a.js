(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-122e3785"],{4870:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return o}));var i=a("b775");function l(t){return Object(i["a"])({url:"/base/list/companyName",method:"post",data:{}})}function o(t){return Object(i["a"])({url:"/base/list/task/device",method:"post",data:{}})}},"822b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("div",[a("el-form",{ref:"listTime",attrs:{model:t.listTime,"label-width":"130px"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"起点:",prop:"startTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.listTime.startTime,callback:function(e){t.$set(t.listTime,"startTime",e)},expression:"listTime.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"恒温点:",prop:"stableTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.listTime.stableTime,callback:function(e){t.$set(t.listTime,"stableTime",e)},expression:"listTime.stableTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"降温点:",prop:"downTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.listTime.downTime,callback:function(e){t.$set(t.listTime,"downTime",e)},expression:"listTime.downTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"终点:",prop:"endTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.listTime.endTime,callback:function(e){t.$set(t.listTime,"endTime",e)},expression:"listTime.endTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"设备编号:"}},[a("task-device-select",{model:{value:t.listTime.deviceNum,callback:function(e){t.$set(t.listTime,"deviceNum",e)},expression:"listTime.deviceNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"间隔(分钟):",prop:"timeSpace"}},[a("el-input",{model:{value:t.listTime.timeSpace,callback:function(e){t.$set(t.listTime,"timeSpace",e)},expression:"listTime.timeSpace"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"随机分钟:",prop:"randomTime"}},[a("el-input",{model:{value:t.listTime.randomTime,callback:function(e){t.$set(t.listTime,"randomTime",e)},expression:"listTime.randomTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.btnQuery()}}},[t._v("查询")]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.simulationData()}}},[t._v("模拟数据")]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.copyDataToDiglog()}}},[t._v("复制数据")])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("el-row",{staticClass:"panel-group"},[a("el-col",{attrs:{span:3,offset:21}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-picture"},on:{click:function(e){return t.changeShow()}}},[t._v("\n          切换视图\n        ")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.chartShow,expression:"chartShow"}],staticClass:"chart-container",attrs:{id:"chartDiv"}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"mnsjChart"}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.chartShow,expression:"!chartShow"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间",width:"180"}}),t._v(" "),t._l(t.tableHeader,(function(e,i){return a("el-table-column",{key:i,attrs:{label:e,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.row.show,expression:"scope.row.show"}],attrs:{placeholder:"请输入内容"},model:{value:e.row.values[i],callback:function(a){t.$set(e.row.values,i,a)},expression:"scope.row.values[key]"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.row.show,expression:"!scope.row.show"}]},[t._v(t._s(e.row.values[i]))])]}}],null,!0)})})),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(t){e.row.show=!0}}},[t._v("编辑")]),t._v(" "),a("el-button",{on:{click:function(a){return t.saveData(e.row)}}},[t._v("保存")])]}}])})],2)],1),t._v(" "),a("div",[a("el-row",{attrs:{gutter:5}},t._l(t.listTemp,(function(e){return a("el-col",{key:e.name,attrs:{span:3}},[a("el-card",{staticClass:"box-card",staticStyle:{"border-radius":"20px"}},[a("div",{staticStyle:{"font-size":"13px","padding-top":"10px"}},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),a("div",{staticStyle:{"font-size":"13px","padding-top":"10px"}},[a("el-checkbox",{model:{value:e.effective,callback:function(a){t.$set(e,"effective",a)},expression:"item.effective"}},[t._v("\n                有效性\n              ")])],1),t._v(" "),a("div",{staticStyle:{"font-size":"13px","padding-top":"10px"}},[a("el-input",{attrs:{placeholder:"浮动值",clearable:""},model:{value:e.randomData,callback:function(a){t.$set(e,"randomData",a)},expression:"item.randomData"}})],1),t._v(" "),a("div",{staticStyle:{"font-size":"13px","padding-top":"10px"}},[a("el-input",{attrs:{placeholder:"起点",clearable:""},model:{value:e.startTemp,callback:function(a){t.$set(e,"startTemp",a)},expression:"item.startTemp"}})],1),t._v(" "),a("div",{staticStyle:{"font-size":"13px","padding-top":"10px"}},[a("el-input",{attrs:{placeholder:"恒温点",clearable:""},model:{value:e.stableTemp,callback:function(a){t.$set(e,"stableTemp",a)},expression:"item.stableTemp"}})],1),t._v(" "),a("div",{staticStyle:{"font-size":"13px","padding-top":"10px"}},[a("el-input",{attrs:{placeholder:"降温点",clearable:""},model:{value:e.downTemp,callback:function(a){t.$set(e,"downTemp",a)},expression:"item.downTemp"}})],1),t._v(" "),a("div",{staticClass:"card-panel-description",staticStyle:{"font-size":"13px","padding-top":"10px"}},[a("el-input",{attrs:{placeholder:"终点",clearable:""},model:{value:e.endTemp,callback:function(a){t.$set(e,"endTemp",a)},expression:"item.endTemp"}})],1)])],1)})),1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"数据复制",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",staticStyle:{"border-radius":"20px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.copyDataInput.fromAttr,callback:function(e){t.$set(t.copyDataInput,"fromAttr",e)},expression:"copyDataInput.fromAttr"}},t._l(t.tableHeader,(function(e,i){return a("el-option",{key:i,attrs:{label:i,value:i}},[t._v(t._s(e))])})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",staticStyle:{"border-radius":"20px"}},[a("el-input",{attrs:{placeholder:"固定增加数",clearable:""},model:{value:t.copyDataInput.addData,callback:function(e){t.$set(t.copyDataInput,"addData",e)},expression:"copyDataInput.addData"}}),t._v(" "),a("el-input",{attrs:{placeholder:"随机变动数",clearable:""},model:{value:t.copyDataInput.randomData,callback:function(e){t.$set(t.copyDataInput,"randomData",e)},expression:"copyDataInput.randomData"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",staticStyle:{"border-radius":"20px"}},[a("el-checkbox-group",{model:{value:t.copyDataInput.toAttr,callback:function(e){t.$set(t.copyDataInput,"toAttr",e)},expression:"copyDataInput.toAttr"}},t._l(t.tableHeader,(function(e,i){return a("el-checkbox",{key:i,attrs:{label:i}},[t._v(t._s(e))])})),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.copyData()}}},[t._v("\n        确认\n      ")])],1)],1)],1)},l=[],o=(a("ac6a"),a("7f7f"),a("b85c")),n=a("b117"),s=a("313e"),r=a.n(s),c=a("e021"),d={components:{TaskDeviceSelect:c["a"]},data:function(){return{tableHeader:{},dialogFormVisible:!1,chart:null,tableData:[],chartShow:!1,listTime:{startTime:"",stableTime:"",downTime:"",endTime:"",deviceNum:[],timeSpace:"",randomTime:""},listTemp:[],copyDataInput:{fromAttr:"",toAttr:[],addData:"",randomData:""}}},mounted:function(){this.btnQuery()},methods:{copyData:function(){var t=this;Object(n["b"])(this.copyDataInput,this.listTime).then((function(e){t.dialogFormVisible=!1,t.btnQuery(),t.copyDataInput={fromAttr:"",toAttr:[],addData:"",randomData:""}}))},copyDataToDiglog:function(){this.dialogFormVisible=!0},saveData:function(t){t.show=!1,Object(n["a"])(t,this.listTime)},changeShow:function(){!0===this.chartShow?(this.chartShow=!1,this.queryDataTable()):(this.chartShow=!0,this.initChart())},btnQuery:function(){!1===this.chartShow?this.queryDataTable():this.queryDataChart()},queryDataTable:function(){var t=this;Object(n["d"])(this.listTime).then((function(e){for(var a in t.tableData=e.data.datas,t.listTime.deviceNum=e.data.deviceNum,t.tableHeader=e.data.tableHeader,t.listTemp=[],t.tableHeader){var i={name:t.tableHeader[a],code:a,startTemp:"",stableTemp:"",downTemp:"",endTemp:"",randomData:"",effective:!0};t.listTemp.push(i)}}))},initChart:function(){var t=document.getElementById("mnsjChart");t.style.width=window.innerWidth-300+"px",t.style.height="300px",this.chart=r.a.init(t),this.queryDataChart()},queryDataChart:function(){var t=this;Object(n["c"])(this.listTime).then((function(e){for(var a in t.tableHeader=e.data.tableHeader,t.listTemp=[],t.tableHeader){var i={name:t.tableHeader[a],code:a,startTemp:"",stableTemp:"",downTemp:"",endTemp:"",randomData:"",effective:!0};t.listTemp.push(i)}var l,n=[],s=[],r=Object(o["a"])(e.data.yDatas);try{for(r.s();!(l=r.n()).done;){var c=l.value,d={name:c.name,type:"line",data:c.values};n.push(d),s.push(c.name)}}catch(u){r.e(u)}finally{r.f()}t.setOptionData(e.data.xDatas,n,s)}))},setOptionData:function(t,e,a){this.chart.setOption({tooltip:{trigger:"axis"},legend:{data:a},toolbox:{feature:{saveAsImage:{show:!0}}},grid:{top:100,left:"2%",right:"2%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:t}],yAxis:[{type:"value",name:"(℃)",axisTick:{show:!1},axisLabel:{margin:10,textStyle:{fontSize:14}}}],series:e})},simulationData:function(){for(var t=this,e=[],a=0;a<this.listTemp.length;a++)!0===this.listTemp[a]["effective"]&&e.push(this.listTemp[a]);Object(n["e"])(this.listTime,e).then((function(e){t.btnQuery()}))}}},u=d,m=(a("f6d9"),a("2877")),p=Object(m["a"])(u,i,l,!1,null,"00ebe34e",null);e["default"]=p.exports},b117:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r}));a("ac6a");var i=a("b775");function l(t){return Object(i["a"])({url:"/data/query/char",method:"post",data:{startTime:t.startTime,endTime:t.endTime,taskNum:t.deviceNum[0],deviceNum:t.deviceNum[1]}})}function o(t){return Object(i["a"])({url:"/data/query/table",method:"post",data:{startTime:t.startTime,endTime:t.endTime,taskNum:t.deviceNum[0],deviceNum:t.deviceNum[1]}})}function n(t,e){return Object(i["a"])({url:"/data/simulation",method:"post",data:{startTime:t.startTime,stableTime:t.stableTime,downTime:t.downTime,endTime:t.endTime,taskNum:t.deviceNum[0],deviceNum:t.deviceNum[1],timeSpace:t.timeSpace,randomTime:t.randomTime,listTemp:e}})}function s(t,e){return Object(i["a"])({url:"/data/change",method:"post",data:{taskNum:e.deviceNum[0],deviceNum:e.deviceNum[1],time:t.time,values:t.values}})}function r(t,e){return Object(i["a"])({url:"/data/copy",method:"post",data:{taskNum:e.deviceNum[0],deviceNum:e.deviceNum[1],fromAttr:t.fromAttr,toAttr:t.toAttr,addData:t.addData,randomData:t.randomData}})}},cf09:function(t,e,a){},e021:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader",{attrs:{options:t.options,placeholder:"请选择",clearable:""},model:{value:t.svalue,callback:function(e){t.svalue=e},expression:"svalue"}})},l=[],o=a("4870"),n={name:"TaskDeviceSelect",props:{value:{type:Array,default:function(){}}},data:function(){return{svalue:this.value,options:[]}},watch:{value:function(t){this.svalue=t},svalue:function(t,e){t!==e&&this.$emit("input",t)}},mounted:function(){this.renderCompanyName()},methods:{renderCompanyName:function(){var t=this;Object(o["b"])().then((function(e){t.options=e.data}))}}},s=n,r=a("2877"),c=Object(r["a"])(s,i,l,!1,null,null,null);e["a"]=c.exports},f6d9:function(t,e,a){"use strict";var i=a("cf09"),l=a.n(i);l.a}}]);