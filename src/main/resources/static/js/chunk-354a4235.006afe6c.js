(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-354a4235"],{4870:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r}));var l=a("b775");function o(t){return Object(l["a"])({url:"/base/list/companyName",method:"post",data:{}})}function r(t){return Object(l["a"])({url:"/base/list/task/device",method:"post",data:{taskState:t}})}},"5bac":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[t._v("\n        设备编号：\n        "),a("el-cascader",{staticStyle:{width:"300px"},attrs:{options:t.options,placeholder:"请选择",filterable:"",clearable:""},on:{change:t.handleChange},model:{value:t.deviceNum,callback:function(e){t.deviceNum=e},expression:"deviceNum"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("el-form",{ref:"listTime",attrs:{model:t.listTime,"label-width":"130px"}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-tab-pane",{attrs:{label:"温度模式选择",name:"0"}},[a("el-card",[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success"},on:{click:function(e){return t.btnControl(1)}}},[t._v("控制下发")])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticStyle:{"text-align":"center"}},[a("el-form-item",[a("el-radio-group",{model:{value:t.listTime.modelType,callback:function(e){t.$set(t.listTime,"modelType",e)},expression:"listTime.modelType"}},[a("el-radio",{attrs:{label:"00"}},[t._v("采集器模式")]),t._v(" "),a("el-radio",{attrs:{label:"01"}},[t._v("阀门控制器模式")])],1)],1)],1)])],1),t._v(" "),a("el-tab-pane",{attrs:{label:"阀门控制",name:"1"}},[a("el-card",[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success"},on:{click:function(e){return t.btnControl(2)}}},[t._v("控制下发")])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("阀门1")])]),t._v(" "),a("div",[a("el-radio-group",{model:{value:t.listTime.tapControl1,callback:function(e){t.$set(t.listTime,"tapControl1",e)},expression:"listTime.tapControl1"}},[a("div",{staticClass:"box-card"},[a("el-tag",[t._v("手动模式")]),t._v(" "),a("el-radio",{attrs:{label:"00"}},[t._v("开启")])],1),t._v(" "),a("div",{staticClass:"box-card"},[a("el-tag",[t._v("自动模式")]),t._v(" "),a("el-radio",{attrs:{label:"01"}},[t._v("启动（或重新启动），等待温度到达")]),t._v(" "),a("el-radio",{attrs:{label:"02"}},[t._v("等恒温状态时间到达")]),t._v(" "),a("el-radio",{attrs:{label:"03"}},[t._v("升温过程，等待升温时间到")]),t._v(" "),a("el-radio",{attrs:{label:"04"}},[t._v("高温恒定状态，等待恒温时间到")]),t._v(" "),a("el-radio",{attrs:{label:"05"}},[t._v("降温过程，等待降温时间到")]),t._v(" "),a("el-radio",{attrs:{label:"06"}},[t._v("等待降温温度到")])],1)])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("阀门2")])]),t._v(" "),a("div",[a("el-radio-group",{model:{value:t.listTime.tapControl2,callback:function(e){t.$set(t.listTime,"tapControl2",e)},expression:"listTime.tapControl2"}},[a("div",{staticClass:"box-card"},[a("el-tag",[t._v("手动模式")]),t._v(" "),a("el-radio",{attrs:{label:"00"}},[t._v("开启")])],1),t._v(" "),a("div",{staticClass:"box-card"},[a("el-tag",[t._v("自动模式")]),t._v(" "),a("el-radio",{attrs:{label:"01"}},[t._v("启动（或重新启动），等待温度到达")]),t._v(" "),a("el-radio",{attrs:{label:"02"}},[t._v("等恒温状态时间到达")]),t._v(" "),a("el-radio",{attrs:{label:"03"}},[t._v("升温过程，等待升温时间到")]),t._v(" "),a("el-radio",{attrs:{label:"04"}},[t._v("高温恒定状态，等待恒温时间到")]),t._v(" "),a("el-radio",{attrs:{label:"05"}},[t._v("降温过程，等待降温时间到")]),t._v(" "),a("el-radio",{attrs:{label:"06"}},[t._v("等待降温温度到")])],1)])],1)])],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自动控制参数设置",name:"2"}},[a("el-card",[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success"},on:{click:function(e){return t.btnControl(3)}}},[t._v("控制下发")])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"阀门1:"}},[a("el-checkbox-group",{model:{value:t.listTime.probeType1,callback:function(e){t.$set(t.listTime,"probeType1",e)},expression:"listTime.probeType1"}},[a("el-checkbox",{attrs:{label:"1"}},[t._v("T1")]),t._v(" "),a("el-checkbox",{attrs:{label:"2"}},[t._v("T2")]),t._v(" "),a("el-checkbox",{attrs:{label:"4"}},[t._v("T3")]),t._v(" "),a("el-checkbox",{attrs:{label:"8"}},[t._v("T4")]),t._v(" "),a("el-checkbox",{attrs:{label:"16"}},[t._v("T5")]),t._v(" "),a("el-checkbox",{attrs:{label:"32"}},[t._v("T6")]),t._v(" "),a("el-checkbox",{attrs:{label:"64"}},[t._v("T7")]),t._v(" "),a("el-checkbox",{attrs:{label:"128"}},[t._v("T8")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"阀门2:"}},[a("el-checkbox-group",{model:{value:t.listTime.probeType2,callback:function(e){t.$set(t.listTime,"probeType2",e)},expression:"listTime.probeType2"}},[a("el-checkbox",{attrs:{label:"1"}},[t._v("T1")]),t._v(" "),a("el-checkbox",{attrs:{label:"2"}},[t._v("T2")]),t._v(" "),a("el-checkbox",{attrs:{label:"4"}},[t._v("T3")]),t._v(" "),a("el-checkbox",{attrs:{label:"8"}},[t._v("T4")]),t._v(" "),a("el-checkbox",{attrs:{label:"16"}},[t._v("T5")]),t._v(" "),a("el-checkbox",{attrs:{label:"32"}},[t._v("T6")]),t._v(" "),a("el-checkbox",{attrs:{label:"64"}},[t._v("T7")]),t._v(" "),a("el-checkbox",{attrs:{label:"128"}},[t._v("T8")])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"静停温度(℃):",prop:"startTemp"}},[a("el-input",{attrs:{placeholder:"静停温度",clearable:""},model:{value:t.listTime.tempControl.startTemp,callback:function(e){t.$set(t.listTime.tempControl,"startTemp",e)},expression:"listTime.tempControl.startTemp"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"静停时长(h):",prop:"startTime"}},[a("el-input",{attrs:{placeholder:"静停时长",clearable:""},model:{value:t.listTime.tempControl.startTime,callback:function(e){t.$set(t.listTime.tempControl,"startTime",e)},expression:"listTime.tempControl.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"升温速度(℃/h):",prop:"upSpeed"}},[a("el-input",{attrs:{placeholder:"升温速度",clearable:""},model:{value:t.listTime.tempControl.upSpeed,callback:function(e){t.$set(t.listTime.tempControl,"upSpeed",e)},expression:"listTime.tempControl.upSpeed"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"恒温温度(℃):",prop:"constantTemp"}},[a("el-input",{attrs:{placeholder:"恒温温度",clearable:""},model:{value:t.listTime.tempControl.constantTemp,callback:function(e){t.$set(t.listTime.tempControl,"constantTemp",e)},expression:"listTime.tempControl.constantTemp"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"恒温时长(h):",prop:"constantTime"}},[a("el-input",{attrs:{placeholder:"恒温时长",clearable:""},model:{value:t.listTime.tempControl.constantTime,callback:function(e){t.$set(t.listTime.tempControl,"constantTime",e)},expression:"listTime.tempControl.constantTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"降温速度(℃/h):",prop:"downSpeed"}},[a("el-input",{attrs:{placeholder:"降温速度",clearable:""},model:{value:t.listTime.tempControl.downSpeed,callback:function(e){t.$set(t.listTime.tempControl,"downSpeed",e)},expression:"listTime.tempControl.downSpeed"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束温度(℃):",prop:"endTemp"}},[a("el-input",{attrs:{placeholder:"结束温度",clearable:""},model:{value:t.listTime.tempControl.endTemp,callback:function(e){t.$set(t.listTime.tempControl,"endTemp",e)},expression:"listTime.tempControl.endTemp"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success"},on:{click:function(e){return t.btnQuery()}}},[t._v("查看数据图像")])],1)],1),t._v(" "),a("div",{staticClass:"panel-group",staticStyle:{"background-color":"white"}},[a("div",{staticClass:"chart-container",attrs:{id:"chartDiv"}},[a("div",{staticStyle:{width:"100%",height:"200px"},attrs:{id:"mnsjChart"}})])])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"手动控制",name:"3"}},[a("el-card",[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"background-color":"#42b983"},attrs:{type:"success"},on:{click:function(e){return t.btnControl(4)}}},[t._v("控制下发")])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("阀门1")])]),t._v(" "),a("div",[a("el-radio-group",{model:{value:t.listTime.manualControl1,callback:function(e){t.$set(t.listTime,"manualControl1",e)},expression:"listTime.manualControl1"}},[a("div",{staticClass:"box-card"},[a("el-radio",{attrs:{label:"00"}},[t._v("停止")]),t._v(" "),a("el-radio",{attrs:{label:"01"}},[t._v("开阀门")]),t._v(" "),a("el-radio",{attrs:{label:"02"}},[t._v("关阀门")]),t._v(" "),a("el-radio",{attrs:{label:"03"}},[t._v("状态不变")])],1)])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("阀门2")])]),t._v(" "),a("div",[a("el-radio-group",{model:{value:t.listTime.manualControl2,callback:function(e){t.$set(t.listTime,"manualControl2",e)},expression:"listTime.manualControl2"}},[a("div",{staticClass:"box-card"},[a("el-radio",{attrs:{label:"00"}},[t._v("停止")]),t._v(" "),a("el-radio",{attrs:{label:"01"}},[t._v("开阀门")]),t._v(" "),a("el-radio",{attrs:{label:"02"}},[t._v("关阀门")]),t._v(" "),a("el-radio",{attrs:{label:"03"}},[t._v("状态不变")])],1)])],1)])],1)],1)],1)],1)])},o=[],r=(a("c5f6"),a("313e")),s=a.n(r),i=a("4870"),n=a("b775");function c(t,e,a){return Object(n["a"])({url:"/device/control",method:"post",data:{deviceNum:e,modelType:t.modelType,tapControl1:t.tapControl1,tapControl2:t.tapControl2,probeType1:t.probeType1,probeType2:t.probeType2,tempControl:t.tempControl,type:a,manualControl1:t.manualControl1,manualControl2:t.manualControl2}})}function p(t){return Object(n["a"])({url:"/device/control/info/query",method:"post",data:{deviceNum:t}})}var d={data:function(){return{active:"0",chart:null,deviceNum:[],listTime:{modelType:"",tapControl1:"",tapControl2:"",manualControl1:"",manualControl2:"",probeType1:[],probeType2:[],tempControl:{startTemp:"",startTime:"",upSpeed:"",constantTemp:"",constantTime:"",downSpeed:"",endTemp:""}},options:[],taskState:1}},mounted:function(){this.getDeviceNum()},methods:{getDeviceNum:function(){var t=this;Object(i["b"])(this.taskState).then((function(e){t.options=e.data,t.deviceNum.push(e.data[0].value),t.deviceNum.push(e.data[0].children[0].value),t.controlInfo(e.data[0].children[0].value)}))},handleChange:function(t){this.controlInfo(this.deviceNum[1])},controlInfo:function(t){var e=this;p(t).then((function(t){e.listTime=t.data,e.btnQuery()}))},btnControl:function(t){var e=this;c(this.listTime,this.deviceNum[1],t).then((function(t){e.$message({message:"控制成功",type:"success",showClose:!0})}))},handleClick:function(t,e){},btnQuery:function(){var t=this.listTime.tempControl,e=[0,t.startTime],a=Number((t.constantTemp-t.startTemp)/t.upSpeed)+Number(t.startTime);e.push(a);var l=a+Number(t.constantTime);e.push(l);var o=Number((t.constantTemp-t.endTemp)/t.downSpeed)+Number(l);e.push(o);var r=[t.startTemp,t.startTemp,t.constantTemp,t.constantTemp,t.endTemp];this.initChart(e,r)},initChart:function(t,e){var a=document.getElementById("mnsjChart");a.style.width=window.innerWidth-300+"px",a.style.height="200px",this.chart=s.a.init(a),this.setOptionData(t,e)},setOptionData:function(t,e){this.chart.setOption({tooltip:{trigger:"axis"},color:["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"],grid:{top:10,left:"2%",right:"2%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:t}],yAxis:[{type:"value",name:"(℃)",axisTick:{show:!1},axisLabel:{margin:10,textStyle:{fontSize:14}}}],series:[{data:e,type:"line"}]})}}},m=d,v=(a("9a1e"),a("2877")),b=Object(v["a"])(m,l,o,!1,null,"2f4b9abd",null);e["default"]=b.exports},"9a1e":function(t,e,a){"use strict";var l=a("f8b9"),o=a.n(l);o.a},f8b9:function(t,e,a){}}]);